if d then
    print('Deliabot already initialised.')
    print('If I am messed up, replace me on the')
    print('fuel barrel and reboot/reinit me.')
    return
end

-- It appears that computercraft uses a version of lua < 5.2
if unpack and not table.unpack then
    table.unpack = unpack
end

-- loadAPI requires that stuff we want to load is global, then
-- namespaces it for us. This is inconvenient for code that is
-- used both inside and outside of computercraft.
os.loadAPI('lib/items')
Item = items.Item
ItemSet = items.ItemSet

os.loadAPI('lib/recipes')
Inputs = recipes.Inputs
Shaped = recipes.Shaped
Shapeless = recipes.Shapeless
Recipe = recipes.Recipe

os.loadAPI('lib/delia')
Delia = delia.Delia

-- os.loadAPI bails on trying to load the recipe book
-- but dofile() seems to work fine.
dofile('lib/recipebook')
items:resolve()

d = Delia:new(items, len)
if not d:refuel() then
    print('Couldn\'t get initial fuel from barrel {0,1}.')
end

